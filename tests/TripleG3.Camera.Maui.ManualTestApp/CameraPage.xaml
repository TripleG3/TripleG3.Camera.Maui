<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:cam="clr-namespace:TripleG3.Camera.Maui;assembly=TripleG3.Camera.Maui"
             x:Class="TripleG3.Camera.Maui.ManualTestApp.CameraPage"
             Title="RTP Remote Video">
    <Grid RowDefinitions="Auto,*,Auto">
        <VerticalStackLayout Spacing="6" Padding="12" Grid.Row="0">
            <Label Text="RTP loopback demo: local camera -> RTP sender -> UDP -> RTP receiver -> RemoteVideoView" FontSize="12" TextColor="Gray" />
            <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                <Entry x:Name="RemoteHostEntry" WidthRequest="160" Placeholder="Host (blank=listen any)" />
                <Entry x:Name="RemotePortEntry" WidthRequest="80" Text="50555" Placeholder="Port" Keyboard="Numeric" />
                <Button Text="Connect" Clicked="OnConnectClicked" />
                <Button Text="Restart Cam" Clicked="OnRestartCameraClicked" />
                <Button Text="Stop" Clicked="OnStopClicked" />
                <HorizontalStackLayout Spacing="4" VerticalOptions="Center">
                    <Label Text="Mirror" FontSize="12" />
                    <Switch x:Name="MirrorSwitch" IsToggled="True" Toggled="OnMirrorToggled" />
                </HorizontalStackLayout>
            </HorizontalStackLayout>
            <Label x:Name="StatusLabel" FontSize="11" TextColor="Gray" LineBreakMode="TailTruncation" />
        </VerticalStackLayout>
        <cam:RemoteVideoView x:Name="RemoteView" Grid.Row="1" HorizontalOptions="Fill" VerticalOptions="Fill" />
        <!-- Hidden camera preview used only for capture -->
        <cam:CameraView x:Name="GpuCameraView" Grid.Row="2" HeightRequest="1" WidthRequest="1" IsVisible="False" />
    </Grid>
</ContentPage>